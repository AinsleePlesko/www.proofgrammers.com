---
title: "DetectNoMainFunction Decision Problem"
description: "Explore the detection of main functions"
date: "2025-09-08"
date-format: long
author: Benedek Kaibas, Abishek Dhakal, Will Bennett
execute:
  echo: true
  engine: python
format:
  live-revealjs:
    completion: true
    theme: default
    css: ../../../css/styles.css
    history: false
    scrollable: true
    transition: slide
    highlight-style: github
    footer: "Proofgrammers"
---

# Theory of Computation

::: {.fragment style="margin-top: -0.5em; font-size: 0.8em;"} 

- {{< iconify fa6-solid lightbulb >}} **What is theory of computation?**
    - Understanding what can be computed
    - Analyzing computational complexity
    - Proving limits of computation
    - "Proofgrammers" combine *proofs* and *programming*

:::

---

# DetectNoMainFunction

## What is the main function in Python?

The main function in Python is declared, like this: `def main(some parameter):`

The `if __name__ == "__main__"` guard checks whether a Python file has a main function.

Direct run: then `__name__` is set to `"__main__"` -> block inside will be run.

Imported Python File e.g.: `import my_script` then `__name__` is set to `my_script` ->
no need for `main` function.

## How does the main function look like in other languages?

Let's see some other programming languages:

- C++:

```cpp
int main(int argc, const* argv[]) {// call of the function} // parameters can be missed
```

- Rust:

```rust
fn main() {// logic or function calls come here}
```

# Do we always need a main function in a Python program?


In **Python**, you donâ€™t always need a `main()` function like you do in languages such as C, C++, or Java.  

How Python Executes Code ?
- Python executes files **top to bottom**.  
- Any code at the top level will run immediately when the script is executed.  

Example Without `main()`:

```python
print("Hello, World!")
# This code runs immediately when the script is executed
```

Example With `main()`:

```python
def main():
    print("Hello, World!")  
    
if __name__ == "__main__":
    main()  # This code runs only when the script is executed directly
```

# Our tool to detect main function in Python programs

```{pyodide}
#| autorun: true
#| max-lines: 7
import ast

class ASTAnalyzer:
    def create_ast(self):
        """Creating an Abstract Syntax Tree."""
        try:
            with open("main.py", "r", encoding='utf-8') as fn:
                read_fn = fn.read()
                code = ast.parse(read_fn)
            return code
        except FileNotFoundError:
            print("Error: 'main.py' not found.")
            return None

    def walk_tree(self):
        """Walking through the created AST."""
        code = self.create_ast()
        if code is None:
            return None
        functions = []
        for node in ast.walk(code):
            if isinstance(node, ast.FunctionDef):
                functions.append(node.name)
                return functions

    def find_main(self):
        """Find main function in nodes created from the AST."""
        ast_function = self.walk_tree()
        if not ast_function:
            return
        main_name = "'main'"

        for name in ast_function:
            if name == "main":
                print(f"Main function found: {name}")
            else:
                print("The function you have entered as an input contains no main function.")


if __name__ == "__main__":
    analyzer = ASTAnalyzer()
    analyzer.walk_tree()
    analyzer.find_main()
```
